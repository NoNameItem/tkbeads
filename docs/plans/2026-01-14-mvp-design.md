# V1: MVP Design — Только смотреть

## Обзор

Минимальный продукт: TUI Kanban-доска для просмотра задач из `.beads/issues.jsonl`.

**Результат:** Запускаем `python -m tkbeads`, видим задачи в 4 колонках, перемещаемся по ним, выходим по `q`.

## Декомпозиция на вертикальные срезы

| # | Срез | Описание |
|---|------|----------|
| 1 | Skeleton | Entry point, TkbeadsApp, пустой экран, `q` выход |
| 2 | Колонки | KanbanScreen, 4 колонки с заголовками и счётчиками, Tab между ними |
| 3 | Данные | Task/Status модели, BeadsLoader, TaskStore, логика BLOCKED/READY |
| 4 | Строки задач | Отображение задач строками в колонках |
| 5 | Навигация | ↑/↓ по задачам, highlight текущей, пропуск пустых колонок |

## Архитектурные решения

### Структура проекта

```
src/tkbeads/
├── __main__.py
├── app.py
├── data/
│   ├── models.py
│   └── loader.py
├── store/
│   └── task_store.py
├── ui/
│   ├── screens/kanban.py
│   └── widgets/column.py
└── styles/app.tcss
```

### Путь к данным

Поиск `.beads/issues.jsonl` вверх по дереву директорий от текущей (как git ищет `.git/`).

### Стили

Отдельный файл `app.tcss`.

### Тестирование

TDD — тесты пишутся перед кодом для каждого среза.

### Обработка ошибок

| Ситуация | Поведение |
|----------|-----------|
| Файл не найден | Сообщение в UI, пустые колонки |
| Битый JSON | Завершить с ошибкой |
| Пустой файл | Пустые колонки, нормальная работа |

## Логика колонок

- **BLOCKED**: `status == open` И есть открытые блокеры
- **READY**: `status == open` И нет открытых блокеров
- **IN PROGRESS**: `status == in_progress`
- **CLOSED**: `status == closed`

Для определения блокеров: смотрим `dependencies` с `type == "blocks"`, проверяем статус зависимой задачи.

## UI спецификация

### Колонки

- 4 колонки равной ширины
- Заголовок: `НАЗВАНИЕ (N)` где N — количество задач
- Визуальное выделение активной колонки

### Навигация

| Клавиша | Действие |
|---------|----------|
| `Tab` | Следующая колонка |
| `Shift+Tab` | Предыдущая колонка |
| `↑/↓` | Перемещение по задачам |
| `q` | Выход |

- При Tab фокус на первую задачу колонки
- Пустые колонки пропускаются при навигации
